<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Aproveitamento de Estudos</title>

  <!-- Bibliotecas externas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>Sistema de Aproveitamento de Estudos</h1>
      <p class="subtitle">Organize suas solicita√ß√µes de aproveitamento de disciplinas</p>
    </header>

    <!-- Sele√ß√£o de Curso -->
    <section class="card curso-section" id="cursoSection">
      <div class="card-header">
        <h2>1. Selecione seu curso</h2>
      </div>
      <div class="card-body">
        <div class="form-group">
          <label for="cursoSelect">Curso:</label>
          <select id="cursoSelect" class="form-control">
            <option value="">Carregando cursos...</option>
          </select>
        </div>
        <div id="cursoInfo" class="info-box" style="display: none;">
          <strong>Curso selecionado:</strong> <span id="cursoNome"></span>
        </div>
      </div>
    </section>

    <!-- Disciplinas -->
    <section class="card disciplinas-section" id="disciplinasSection" style="display: none;">
      <div class="card-header">
        <h2>2. Adicione as disciplinas</h2>
      </div>
      <div class="card-body">
        <div id="disciplinasContainer"></div>

        <button class="btn btn-secondary" onclick="adicionarDisciplina()">
          <span>‚ûï</span> Adicionar outra disciplina
        </button>
      </div>
    </section>

    <!-- A√ß√µes -->
    <section class="actions" id="actionsSection" style="display: none;">
      <div class="actions-grid">
        <button class="btn btn-primary" onclick="salvarSessao()">
          <span>üíæ</span> Salvar Sess√£o
        </button>

        <button class="btn btn-success" onclick="exportarTudo()">
          <span>üì¶</span> Exportar Tudo (.aprov)
        </button>

        <button class="btn btn-info" onclick="gerarPDF()">
          <span>üìÑ</span> Gerar PDF
        </button>

        <label class="btn btn-warning file-input-label">
          <span>üìÅ</span> Importar .aprov
          <input type="file" id="importFile" accept=".aprov" onchange="importarArquivo()" style="display: none;" />
        </label>
      </div>
    </section>

    <!-- Template de Disciplina (hidden) -->
    <template id="disciplinaTemplate">
      <div class="disciplina-card">
        <div class="disciplina-header">
          <h3>Disciplina <span class="disciplina-numero"></span></h3>
          <button class="btn-remove" onclick="removerDisciplina(this)" title="Remover disciplina">‚úï</button>
        </div>

        <div class="disciplina-body">
          <!-- IES de origem -->
          <div class="form-row">
            <div class="form-group">
              <label>IES de origem:</label>
              <select class="form-control ies-select" onchange="mostrarCampoIES(this)">
                <option value="UFMT">UFMT</option>
                <option value="Externa">Externa</option>
              </select>
            </div>

            <div class="form-group ies-externa-group" style="display: none;">
              <label>Nome da institui√ß√£o:</label>
              <input type="text" class="form-control ies-outra" placeholder="Ex: USP, UNICAMP..." />
            </div>
          </div>

          <!-- Disciplina cursada -->
          <div class="form-row">
            <div class="form-group flex-2">
              <label>Disciplina cursada:</label>
              <input type="text" class="form-control disciplina-cursada" placeholder="Ex: √Ålgebra Linear" />
            </div>

            <div class="form-group">
              <label>C√≥digo:</label>
              <input type="text" class="form-control codigo-cursada" placeholder="Ex: MAT123" />
            </div>
          </div>

          <!-- Carga hor√°ria e nota -->
          <div class="form-row">
            <div class="form-group">
              <label>Carga Hor√°ria:</label>
              <input type="text" class="form-control carga-horaria-cursada" placeholder="Ex: 60h" />
            </div>

            <div class="form-group">
              <label>Nota:</label>
              <input type="text" class="form-control nota" placeholder="Ex: 8.5" />
            </div>
          </div>

          <!-- Aproveitamento -->
          <div class="form-row">
            <div class="form-group">
              <label>Tipo de disciplina:</label>
              <select class="form-control tipo-disciplina" onchange="carregarDisciplinasPorTipo(this)">
                <option value="">Selecione</option>
                <option value="obrigatorias">Obrigat√≥ria</option>
                <option value="optativas">Optativa</option>
              </select>
            </div>

            <div class="form-group flex-2 autocomplete-wrapper">
              <label>Aproveitar como:</label>
              <input
                type="text"
                class="form-control disciplina-aproveitar-input"
                placeholder="Digite para buscar a disciplina..."
                autocomplete="off"
                oninput="filtrarDisciplinas(this)"
                onfocus="mostrarSugestoes(this)"
              />
              <input type="hidden" class="disciplina-aproveitar-codigo" />
              <div class="autocomplete-suggestions"></div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group flex-2">
              <label>C√≥digo da disciplina:</label>
              <input type="text" class="form-control codigo-aproveitar" readonly />
            </div>
          </div>

          <!-- Anexos -->
          <div class="anexos-section">
            <label class="anexos-label">Documentos comprobat√≥rios:</label>
            <div class="anexos-area">
              <label class="btn-anexo">
                <span>üìé</span> Adicionar arquivo
                <input type="file" multiple onchange="adicionarAnexos(this)" style="display: none;" />
              </label>
              <div class="anexos-list"></div>
            </div>
          </div>
        </div>
      </div>
    </template>

  </div>

  <script src="script.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Aproveitamento de Estudos</title>

  <!-- Bibliotecas externas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>Sistema de Aproveitamento de Estudos</h1>
      <p class="subtitle">Organize suas solicita√ß√µes de aproveitamento de disciplinas</p>
    </header>

    <!-- Sele√ß√£o de Curso -->
    <section class="card curso-section" id="cursoSection">
      <div class="card-header">
        <h2>1. Selecione seu curso</h2>
      </div>
      <div class="card-body">
        <div class="form-group">
          <label for="cursoSelect">Curso:</label>
          <select id="cursoSelect" class="form-control">
            <option value="">Carregando cursos...</option>
          </select>
        </div>
        <div id="cursoInfo" class="info-box" style="display: none;">
          <strong>Curso selecionado:</strong> <span id="cursoNome"></span>
        </div>
      </div>
    </section>

    <!-- Disciplinas -->
    <section class="card disciplinas-section" id="disciplinasSection" style="display: none;">
      <div class="card-header">
        <h2>2. Adicione as disciplinas</h2>
      </div>
      <div class="card-body">
        <div class="table-wrapper">
          <table class="disciplinas-table" id="disciplinasTable">
            <thead>
              <tr>
                <th class="col-num">#</th>
                <th class="col-ies">IES</th>
                <th class="col-disciplina">Disciplina Cursada</th>
                <th class="col-codigo-small">C√≥digo</th>
                <th class="col-ch-small">C.H.</th>
                <th class="col-nota-small">Nota</th>
                <th class="col-tipo">Tipo</th>
                <th class="col-aproveitar">Aproveitar Como</th>
                <th class="col-codigo-small">C√≥digo</th>
                <th class="col-anexos">Anexos</th>
                <th class="col-actions">A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="disciplinasTableBody">
              <!-- Linhas ser√£o inseridas aqui -->
            </tbody>
          </table>
        </div>

        <button class="btn btn-secondary mt-3" onclick="adicionarDisciplina()">
          <span>‚ûï</span> Adicionar disciplina
        </button>
      </div>
    </section>

    <!-- A√ß√µes -->
    <section class="actions" id="actionsSection" style="display: none;">
      <div class="actions-grid">
        <button class="btn btn-primary" onclick="salvarSessao()">
          <span>üíæ</span> Salvar Sess√£o
        </button>

        <button class="btn btn-success" onclick="exportarTudo()">
          <span>üì¶</span> Exportar Tudo (.aprov)
        </button>

        <button class="btn btn-info" onclick="gerarPDF()">
          <span>üìÑ</span> Gerar PDF
        </button>

        <label class="btn btn-warning file-input-label">
          <span>üìÅ</span> Importar .aprov
          <input type="file" id="importFile" accept=".aprov" onchange="importarArquivo()" style="display: none;" />
        </label>
      </div>
    </section>

    <!-- Template de Linha de Disciplina (hidden) -->
    <template id="disciplinaTemplate">
      <tr class="disciplina-row">
        <td class="col-num">
          <span class="disciplina-numero"></span>
        </td>

        <td class="col-ies">
          <select class="input-table ies-select" onchange="mostrarCampoIES(this)">
            <option value="UFMT">UFMT</option>
            <option value="Externa">Externa</option>
          </select>
          <input type="text" class="input-table ies-outra" placeholder="Nome IES..." style="display:none; margin-top:4px;" />
        </td>

        <td class="col-disciplina">
          <input type="text" class="input-table disciplina-cursada" placeholder="Nome da disciplina..." />
        </td>

        <td class="col-codigo-small">
          <input type="text" class="input-table codigo-cursada" placeholder="C√≥digo" />
        </td>

        <td class="col-ch-small">
          <input type="text" class="input-table carga-horaria-cursada" placeholder="64h" />
        </td>

        <td class="col-nota-small">
          <input type="text" class="input-table nota" placeholder="7.0" />
        </td>

        <td class="col-tipo">
          <select class="input-table tipo-disciplina" onchange="carregarDisciplinasPorTipo(this)">
            <option value="">Selecione</option>
            <option value="obrigatorias">Obrigat√≥ria</option>
            <option value="optativas">Optativa</option>
          </select>
        </td>

        <td class="col-aproveitar autocomplete-wrapper">
          <input
            type="text"
            class="input-table disciplina-aproveitar-input"
            placeholder="Buscar disciplina..."
            autocomplete="off"
            oninput="filtrarDisciplinas(this)"
            onfocus="mostrarSugestoes(this)"
          />
          <input type="hidden" class="disciplina-aproveitar-codigo" />
          <div class="autocomplete-suggestions"></div>
        </td>

        <td class="col-codigo-small">
          <input type="text" class="input-table codigo-aproveitar" readonly />
        </td>

        <td class="col-anexos">
          <label class="btn-anexo-mini">
            <span>üìé</span> <span class="anexos-count">(0)</span>
            <input type="file" multiple onchange="adicionarAnexos(this)" style="display: none;" />
          </label>
          <div class="anexos-list-mini"></div>
        </td>

        <td class="col-actions">
          <button class="btn-icon btn-remove-row" onclick="removerDisciplina(this)" title="Remover">
            ‚úï
          </button>
        </td>
      </tr>
    </template>

  </div>

  <script src="script.js"></script>
</body>
</html>
